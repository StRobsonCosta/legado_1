CREATE PROCEDURE PRC_OBTER_EXTRATO (
    IN P_CONTA VARCHAR(20),
    IN P_DATA_INICIO DATE,
    IN P_DATA_FIM DATE
)
DYNAMIC RESULT SETS 1
LANGUAGE SQL
BEGIN
    DECLARE C1 CURSOR WITH RETURN FOR
        SELECT
            DATA_MOV,
            DESCRICAO,
            VALOR,
            TIPO
        FROM TB_TRANSACOES
        WHERE CONTA = P_CONTA
          AND DATA_MOV BETWEEN P_DATA_INICIO AND P_DATA_FIM
        ORDER BY DATA_MOV;

    OPEN C1;
END

